var _klikenTools=function(){return{version:"1.2.0",t0:null,wixregistered:0,analyticsregistered:0,log:function(msg,clr){if(this.verbose&&window["console"]){if(!clr&&typeof msg=="string"){msg="%c"+msg;clr="background: #ffd; color: #333";console.log(msg,clr)}else if(clr&&typeof msg=="string"){console.log(msg,clr)}else{console.log(msg)}}},verbose:Boolean(""),pushTo:0,lastPath:"",namespaces:[],processEvent:function(eventName,data){var time=new Date;if(typeof this.namespaces=="undefined"||this.namespaces.length==0){this.log("Namespaces not defined");klpush("processEvent",eventName,data);this.pushTo=setTimeout(klikentools.processEvent,1e4);return}else if(!this.analyticsregistered){for(let i=0;i<this.namespaces.length;i++){if(!window[this.namespaces[i]]){this.log("Namespace not ready",this.namespaces[i]);klpush("processEvent",eventName,data);this.pushTo=setTimeout(klikentools.processEvent,50);return}}this.analyticsregistered=1;this.log("Processing Stored Events "+time.getTime());for(i=0;i<klikenTasks.length;i++){if(klikenTasks[i][0]=="processEvent"&&klikenTasks[i].length>=3){this.processEvent(klikenTasks[i][1],klikenTasks[i][2]);klikenTasks[i][0]="processEventComplete"}}}this.log("Event: "+eventName+" "+time.getTime());this.log(data);switch(eventName.toLowerCase()){case"pageview":for(let i=0;i<this.namespaces.length;i++){if(this.lastPath!=""&&this.lastPath!=data.pagePath){window[this.namespaces[i]].register_page_view(data.pagePath)}else{this.log("Skipping initial or duplicate page view")}}this.lastPath=data.pagePath;break;case"addproductimpression":for(i=0;i<data.contents.length;i++){this.log(data.contents[i])}break;case"clickproduct":for(let i=0;i<this.namespaces.length;i++){window[this.namespaces[i]].track("ViewContent",{content_type:"product",content_ids:[data.id],content_name:data.name,content_category:data.category,value:data.price,currency:data.currency});window[this.namespaces[i]].gEvent("view_item",{items:[{id:data.id,name:data.name,category:data.category,price:data.price,list_position:data.position}]});this.log("Tracking Item View: "+data.name);try{window[this.namespaces[i]].register_product_view({id:data.id,category:data.category})}catch(err){this.log("Missing: register_product_view")}}break;case"viewcontent":break;case"addtocart":this.log("Tracking Add To Cart of Item "+data.name);for(let i=0;i<this.namespaces.length;i++){window[this.namespaces[i]].track("AddToCart",{content_type:"product",content_ids:[data.id],content_name:data.name,content_category:data.category,value:data.price,currency:data.currency});window[this.namespaces[i]].gEvent("add_to_cart",{items:[{id:data.id,name:data.name,category:data.category,price:data.price,quantity:data.quantity}]});try{window[this.namespaces[i]].register_shopcart({items:[{id:data.id,name:data.name,category:data.category,price:data.price,quantity:data.quantity}]})}catch(err){this.log("Missing: register_shopcart")}}break;case"removefromcart":break;case"initiatecheckout":break;case"startpayment":break;case"addpaymentinfo":break;case"checkoutstep":break;case"purchase":var orderID,orderAffiliate,orderSubtotal,orderTax,orderCity,orderState,orderCountry,orderTotal,orderCurrency,appflow;orderID=data.id;orderSubtotal=data.revenue;orderTotal=data.revenue;orderCurrency=data.currency;appflow={supresstd:data.origin?.toLowerCase()=="bookings"};for(let i=0;i<this.namespaces.length;i++){let trans=window[this.namespaces[i]].create_transaction(orderID,orderAffiliate,orderSubtotal,orderTax,orderCity,orderState,orderCountry,orderTotal,orderCurrency,appflow);for(item=0;item<data.contents.length;item++){var oItem=data.contents[item];trans.add_item(oItem.id,oItem.name,oItem.category,oItem.price,oItem.quantity)}window[this.namespaces[i]].hit.set_page(data.origin);window[this.namespaces[i]].register_page_view();window[this.namespaces[i]].transaction=null;if(data.origin?.toLowerCase()=="bookings"){let appFlow={v:orderTotal,vf:orderCurrency,orderid:orderID};window[this.namespaces[i]].register_appointment(appFlow)}}break;case"lead":for(let i=0;i<this.namespaces.length;i++){window[this.namespaces[i]].register_lead()}break;case"customevent":break;default:break}},registerAnalytics:function(self){self=self||this;var time=new Date;if(!self.t0){self.t0=time.getTime();if(typeof window.wixDevelopersAnalytics=="undefined")self.log("%c wixDevelopersAnalytics not initialized at start","background: #800; font-weight: bold; color: #fff")}if(typeof window.wixDevelopersAnalytics=="undefined"){}else{if(!(self.wixregistered||0)){self.log("%c wixDevelopersAnalytics initialized after: "+(time.getTime()-self.t0)+"ms","background: #080; color: #fff");self.log("%c Kliken Verify Tag: ","background: #080; color: #fff");window.wixDevelopersAnalytics.register("1a55182b-0e4e-4f5c-b7ea-484bfb774dd9",processKlikenEvent);self.wixregistered=1}}}}};window.klikenTasks=window.klikenTasks||[];function klpush(){klikenTasks.push(arguments)}function processKlikenEvent(eventName,data){klikentools.processEvent(eventName,data)}window["klikentools"]=window["klikentools"]||new _klikenTools;if(window["klikentools"].namespaces.indexOf("kliwix")<0){window["klikentools"].namespaces.push("kliwix")}window["klikentools"].registerAnalytics(window["klikentools"]);window.onWixDevelopersAnalyticsReady=function(){window["klikentools"].registerAnalytics(window["klikentools"])};